<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="canvasç”»å›¾ç‰‡
ctx.drawImage(å›¾ç‰‡å¯¹è±¡,x,y);ä¸‰ä¸ªå‚æ•°ï¼šå›¾ç‰‡å¯¹è±¡ï¼Œå¼€å§‹ç»˜åˆ¶å›¾ç‰‡çš„åæ ‡ï¼ˆå³ä»å›¾ç‰‡çš„ä½•ä½ç½®å¼€å§‹ç»˜åˆ¶ï¼‰
ctx.drawImage(å›¾ç‰‡å¯¹è±¡,x,y,width,height);äº”ä¸ªå‚æ•°ï¼šåä¸¤ä¸ªå‚æ•°æ˜¯æ‰€ç»˜ç”»çš„å›¾ç‰‡åœ¨ç”»å¸ƒä¸­çš„å®½å’Œé«˜
ctx.drawImage(å›¾ç‰‡å¯¹è±¡,">
    

    <!--Author-->
    
        <meta name="author" content="zhouna">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="canvasè¿›é˜¶2"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="webå‰ç«¯å¼€å‘"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>canvasè¿›é˜¶2 - webå‰ç«¯å¼€å‘</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
    <link rel="icon" href="github">
    
	
</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Welcome to Lala's blog!</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                Tags
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                Categories
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/zhouxiaona">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('http://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/about-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>canvasè¿›é˜¶2</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2017-12-27
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h2 id="canvasç”»å›¾ç‰‡"><a href="#canvasç”»å›¾ç‰‡" class="headerlink" title="canvasç”»å›¾ç‰‡"></a>canvasç”»å›¾ç‰‡</h2><ul>
<li><code>ctx.drawImage(å›¾ç‰‡å¯¹è±¡,x,y);</code><br>ä¸‰ä¸ªå‚æ•°ï¼šå›¾ç‰‡å¯¹è±¡ï¼Œå¼€å§‹ç»˜åˆ¶å›¾ç‰‡çš„åæ ‡ï¼ˆå³ä»å›¾ç‰‡çš„ä½•ä½ç½®å¼€å§‹ç»˜åˆ¶ï¼‰</li>
<li><code>ctx.drawImage(å›¾ç‰‡å¯¹è±¡,x,y,width,height);</code><br>äº”ä¸ªå‚æ•°ï¼šåä¸¤ä¸ªå‚æ•°æ˜¯æ‰€ç»˜ç”»çš„å›¾ç‰‡åœ¨ç”»å¸ƒä¸­çš„å®½å’Œé«˜</li>
<li><code>ctx.drawImage(å›¾ç‰‡å¯¹è±¡,x,y,width,height,x1,y1,width1,height1);</code><br>ä¹ä¸ªå‚æ•°ï¼šåå››ä¸ªå‚æ•°åˆ†åˆ«ä¸ºæ‰€ç»˜å›¾ç‰‡åœ¨ç”»å¸ƒä¸­å¼€å§‹ç»˜ç”»çš„ä½ç½®åæ ‡å’Œåœ¨ç”»å¸ƒä¸­çš„å®½å’Œé«˜ã€‚</li>
<li><code>å› ä¸ºå›¾ç‰‡ã€è§†é¢‘ç­‰å±äºèµ„æºæ•°æ®ï¼ŒåŠ è½½éœ€è¦ä¸€å®šçš„æ—¶é—´ï¼Œæ‰€ä»¥éœ€è¦é¢„åŠ è½½ã€‚</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var img=new Image();</div><div class="line">img.src=<span class="string">"path./src.png"</span>;</div><div class="line">img.onload=<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">	ctx.drawImage(img,0,0,100,100,10,10,100,100);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/7432522-f8fda22acca10edf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-12-27 ä¸‹åˆ9.22.22.png"></p>
<h3 id="getImageData-0-0-500-500-è·å–å›¾ç‰‡åƒç´ ç‚¹"><a href="#getImageData-0-0-500-500-è·å–å›¾ç‰‡åƒç´ ç‚¹" class="headerlink" title="getImageData(0,0,500,500);è·å–å›¾ç‰‡åƒç´ ç‚¹"></a><code>getImageData(0,0,500,500);</code>è·å–å›¾ç‰‡åƒç´ ç‚¹</h3><ul>
<li>å››ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼šå¼€å§‹è·å–åƒç´ ç‚¹çš„åæ ‡ï¼Œè·å–èŒƒå›´çš„å®½å’Œé«˜<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var img=new Image();</div><div class="line">img.src=<span class="string">"path./src.png"</span>;</div><div class="line">img.onload=<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">	ctx.drawImage(img,0,0,100,100,0,0,500,500);</div><div class="line">	var imageData=ctx.getImageData(0,0,500,500);</div><div class="line">	console.log(imageData);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="imageData"><a href="#imageData" class="headerlink" title="imageData"></a>imageData</h4><ul>
<li>å¯ä»¥æ‰“å°çœ‹çœ‹é‡Œé¢çš„æ•°æ®å½¢å¼</li>
<li>æ‰€å¾—åˆ°çš„imageDataæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ†åˆ«ä¸ºï¼šdataæ•°ç»„ã€æ‰€è·å–åƒç´ ç‚¹çš„å®½åº¦ã€æ‰€è·å–åƒç´ ç‚¹çš„é«˜åº¦</li>
<li>æ‰€è·å–åˆ°çš„imageDataæ˜¯æ‰€æœ‰çš„<code>rgba(r,g,b,a)</code>çš„å››ä¸ªå‚æ•°ï¼Œ4ä¸ªä¸ºä¸€ç»„</li>
<li>æ‰€ä»¥éå†<code>imageData.data</code>æ•°ç»„ï¼Œå¯ä»¥å¾—åˆ°æ‰€æœ‰çš„åƒç´ ç‚¹ã€‚</li>
<li>åˆ©ç”¨å¯¹åƒç´ ç‚¹çš„å¤„ç†ï¼Œå¯ä»¥æ”¹å˜æ•´ä¸ªå›¾ç‰‡çš„è‰²è°ƒï¼Œè¿›è€Œå¯¹å›¾ç‰‡è¿›è¡Œç®€å•çš„è‰²è°ƒå¤„ç†ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var img=new Image();</div><div class="line">img.src=<span class="string">"path./src.png"</span>;</div><div class="line">img.onload=<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">	ctx.drawImage(img,0,0,100,100,0,0,500,500);</div><div class="line">	var imageData=ctx.getImageData(0,0,500,500);</div><div class="line">	console.log(imageData);</div><div class="line">	<span class="keyword">for</span>(var i=0;i&lt;imageData.data.length;i+=4)&#123;</div><div class="line">		var r=imageData.data[i];</div><div class="line">		var g=imageData.data[i+1];</div><div class="line">		var b=imageData.data[i+2];</div><div class="line">		var a=imageData.data[i+3];//é€æ˜åº¦</div><div class="line">	&#125;</div><div class="line">	var gray=(r+g+b)/3;</div><div class="line">	imageData.data[i]=gray;</div><div class="line">	imageData.data[i+1]=gray;</div><div class="line">	imageData.data[i+2]=gray;</div><div class="line">&#125;</div><div class="line">//å†æŠŠå˜ä¹‹åçš„é¢œè‰²é‡æ–°èµ‹å€¼ç»™imageDataå¯¹è±¡</div><div class="line">ctx.putImageData(imageData,100,100);//åä¸¤ä¸ªå‚æ•°ä¸ºè¦ç»™é¢œè‰²çš„ä½ç½®,ï¼ˆç”»å¸ƒä¸­çš„åæ ‡ï¼‰ï¼Œè¿˜å¯ä»¥åˆ©ç”¨è¿™ä¸ªå±æ€§å¯¹å›¾åƒè¿›è¡Œåè‰²å¤„ç†,å¦‚ä¸‹å›¾æ‰€ç¤º.</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/7432522-8fbedb51574e7fa0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-12-28 ä¸‹åˆ7.07.29.png"></p>
<h2 id="bezieræ›²çº¿"><a href="#bezieræ›²çº¿" class="headerlink" title="bezieræ›²çº¿"></a>bezieræ›²çº¿</h2><ul>
<li>äºŒæ¬¡è´å¡å°”æ›²çº¿<code>ctx.quadraticCurveTo(500,0,500,500);</code>ç”»è´å¡å°”æ›²çº¿åŒ…æ‹¬ç”»ä¸€ä¸ªèµ·å§‹ç‚¹ï¼Œå³<code>ctx.moveTo(0,0);</code>å‡½æ•°é‡Œé¢çš„ä¸¤ä¸ªåæ ‡åˆ†åˆ«ä¸ºæ§åˆ¶ç‚¹çš„åæ ‡å’Œç»“æŸç‚¹çš„åæ ‡ã€‚</li>
<li>ä¸‰æ¬¡è´å¡å°”æ›²çº¿<code>ctx.bezierCurveTo(500,0,0,500,500,500);</code>è·ŸäºŒæ¬¡è´å¡å°”æ›²çº¿ä¸€æ ·ï¼Œåªä¸è¿‡å¤šäº†ä¸€å¯¹æ§åˆ¶ç‚¹ï¼Œå¯ä»¥ç”»æ›´ä¸°å¯Œçš„æ›²çº¿ã€‚å®ƒä¹ŸåŒæ ·éœ€è¦ä¸€ä¸ªå¼€å§‹ç‚¹ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ctx.beginPath();</div><div class="line">ctx.moveTo(0,0);</div><div class="line">ctx.quadraticCurveTo(500,0,500,500);</div><div class="line">ctx.stroke();</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/7432522-7f3e28a343a19e8a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-12-28 ä¸‹åˆ7.20.41.png"><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ctx.beginPath();</div><div class="line">ctx.moveTo(0,0);</div><div class="line">ctx.bezierCurveTo(500,0,0,500,500,500);</div><div class="line">ctx.stroke();</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/7432522-0ccbe60bfc98f4f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-12-28 ä¸‹åˆ7.21.13.png"></p>
<h3 id="å°æ —å­ğŸ©ğŸ©ğŸ©"><a href="#å°æ —å­ğŸ©ğŸ©ğŸ©" class="headerlink" title="å°æ —å­ğŸ©ğŸ©ğŸ©"></a>å°æ —å­ğŸ©ğŸ©ğŸ©</h3><h4 id="åŠ¨æ€è´å¡å°”æ›²çº¿åŠ¨ç”»"><a href="#åŠ¨æ€è´å¡å°”æ›²çº¿åŠ¨ç”»" class="headerlink" title="åŠ¨æ€è´å¡å°”æ›²çº¿åŠ¨ç”»"></a><code>åŠ¨æ€è´å¡å°”æ›²çº¿åŠ¨ç”»</code></h4><ul>
<li>å®ç°è¿™ä¸ªæ•ˆæœæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åˆ¤æ–­é¼ æ ‡çš„ç‚¹åœ¨çº¢çƒä¸Šè¿˜æ˜¯è“çƒä¸Šï¼Œä¸€æ˜¯è®¡ç®—é¼ æ ‡è½ä¸‹çš„ç‚¹è·ç¦»å°çƒåœ†å¿ƒçš„è·ç¦»ï¼Œç¬¬äºŒç§æ–¹æ³•å°±æ˜¯ä¸‹é¢æ‰€æ¼”ç¤ºçš„åˆ©ç”¨<code>ctx.isPointInPath(x,y);</code>æ¥åˆ¤æ–­æŸä¸€ç‚¹æ˜¯å¦åœ¨å½“å‰ç”»å¸ƒä¸­ï¼Œæ­¤æ–¹æ³•åªèƒ½åˆ¤æ–­å½“å‰ç”»å¸ƒçš„ç‚¹ï¼Œæ‰€ä»¥æŠŠçº¢çƒå’Œè“è‰²çƒåˆ†å¼€ç”»ï¼Œåˆ†å¼€åˆ¤æ–­å°±è¡Œäº†ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> draw(x1,y1,x2,y2)&#123;</div><div class="line">	//ç”»ç°è‰²è™šçº¿</div><div class="line">	ctx.beginPath();</div><div class="line">	ctx.moveTo(0,500);</div><div class="line">	ctx.lineTo(500,0);</div><div class="line">	ctx.lineWidth=15;</div><div class="line">	ctx.strokeStyle=<span class="string">"lightgray"</span>;</div><div class="line">	ctx.stroke();</div><div class="line">	//ç”»é»‘è‰²å®çº¿</div><div class="line">	ctx.beginPath();</div><div class="line">	ctx.moveTo(500,0);</div><div class="line">	ctx.bezierCurveTo(x1,y1,x2,y2,0,500);</div><div class="line">	ctx.lineWidth=15;</div><div class="line">	ctx.strokeStyle=<span class="string">"black"</span>;</div><div class="line">	ctx.stroke();</div><div class="line">	//ç”»ä¸¤æ¡ç»†é»‘çº¿</div><div class="line">	ctx.beginPath();</div><div class="line">	ctx.moveTo(0,500);</div><div class="line">	ctx.lineTo(x1,y1);</div><div class="line">	ctx.lineWidth=5;</div><div class="line">	ctx.stroke();</div><div class="line">	</div><div class="line">	ctx.beginPath();</div><div class="line">	ctx.moveTo(500,0);</div><div class="line">	ctx.lineTo(x2,y2);</div><div class="line">	ctx.lineWidth=5;</div><div class="line">	ctx.stroke();</div><div class="line">&#125;</div><div class="line">//ç”»çº¢çƒçš„æ–¹æ³•</div><div class="line"><span class="keyword">function</span> redBall(x1,y1)&#123;</div><div class="line">	ctx.beginPath();</div><div class="line">	ctx.fillStyle=<span class="string">"pink"</span>;</div><div class="line">	ctx.arc(x1,y1,10,0,Math.PI*2);</div><div class="line">	ctx.fill();</div><div class="line">&#125;</div><div class="line">//ç”»è“çƒçš„æ–¹æ³•</div><div class="line"><span class="keyword">function</span> blueBall(x2,y2)&#123;</div><div class="line">	ctx.beginPath();</div><div class="line">	ctx.fillStyle=<span class="string">"blue"</span>;</div><div class="line">	ctx.arc(x2,y2,10,0,Math.PI*2);</div><div class="line">	ctx.fill();</div><div class="line">&#125;</div><div class="line"></div><div class="line">//åˆå§‹åŒ–</div><div class="line">var x1=100;</div><div class="line">var y1=100;</div><div class="line">var x2=400;</div><div class="line">var y2=400;</div><div class="line">draw(x1,y1,x2,y2);</div><div class="line">redBall(x1,y1);</div><div class="line">blueBall(x2,y2);</div><div class="line"></div><div class="line">mycanvas.onmousedown=<span class="keyword">function</span>(e)&#123;</div><div class="line">	var ev=e || window.event;</div><div class="line">	var xx=ev.clientX-mycanvas.offsetLeft;</div><div class="line">	var yy=ev.clientY-mycanvas.offsetTop;</div><div class="line">	</div><div class="line">	redBall(x1,y1);</div><div class="line">	//åˆ¤æ–­é¼ æ ‡è½ä¸‹çš„ç‚¹åœ¨ä¸åœ¨çº¢çƒå†…</div><div class="line">	<span class="keyword">if</span>(ctx.isPointInPath(xx,yy))&#123;</div><div class="line">		console.log(<span class="string">"åœ¨çº¢çƒä¸­"</span>);</div><div class="line">		mycanvas.onmousemove=<span class="keyword">function</span>(e)&#123;</div><div class="line">			var ev=e || window.event;</div><div class="line">			var xx1=ev.clientX-mycanvas.offsetLeft;</div><div class="line">			var yy1=ev.clientY-mycanvas.offsetTop;</div><div class="line">			ctx.clearRect(0,0,mycanvas.width,mycanvas.height);</div><div class="line">			x1=xx1;</div><div class="line">			y1=yy1;</div><div class="line">			draw(x1,y1,x2,y2);</div><div class="line">			redBall(x1,y1);</div><div class="line">			blueBall(x2,y2);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	blueBall(x2,y2);</div><div class="line">	//åˆ¤æ–­é¼ æ ‡è½ä¸‹çš„ç‚¹åœ¨ä¸åœ¨çº¢çƒå†…</div><div class="line">	<span class="keyword">if</span>(ctx.isPointInPath(xx,yy))&#123;</div><div class="line">		console.log(<span class="string">"åœ¨è“çƒä¸­"</span>);</div><div class="line">		mycanvas.onmousemove=<span class="keyword">function</span>(e)&#123;</div><div class="line">			var ev=e || window.event;</div><div class="line">			var xx1=ev.clientX-mycanvas.offsetLeft;</div><div class="line">			var yy1=ev.clientY-mycanvas.offsetTop;</div><div class="line">			ctx.clearRect(0,0,mycanvas.width,mycanvas.height);</div><div class="line">			x2=xx1;</div><div class="line">			y2=yy1;</div><div class="line">			draw(x1,y1,x2,y2);</div><div class="line">			redBall(x1,y1);</div><div class="line">			blueBall(x2,y2);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">document.onmouseup=<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">	mycanvas.onmousemove=null;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/7432522-8247fba1a1e97cc5.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="0.gif"></p>
<h4 id="åˆ®åˆ®å¡æ•ˆæœ"><a href="#åˆ®åˆ®å¡æ•ˆæœ" class="headerlink" title="åˆ®åˆ®å¡æ•ˆæœ"></a><code>åˆ®åˆ®å¡æ•ˆæœ</code></h4><ul>
<li>åœ¨canvasç”»å¸ƒä¸­ï¼Œç”»å¸ƒçš„é»˜è®¤é¢œè‰²æ˜¯é€æ˜çš„ï¼Œå¹¶ä¸”åˆ©ç”¨ç»„åˆå›¾å½¢çš„ç›¸å…³å‡½æ•°æˆ‘ä»¬å¯ä»¥åšå‡ºåˆ®åˆ®å¡çš„æ•ˆæœ</li>
<li><code>ctx.globalCompositeOperation</code>è®¾ç½®ç»„åˆå›¾å½¢çš„ç›®æ ‡å›¾å’Œæºå›¾çš„ç»„åˆæ–¹å¼</li>
<li>åœ¨canvasä¸­æŠŠå…ˆç”»çš„å›¾å«åšç›®æ ‡å›¾ï¼Œåç”»çš„å›¾å«åšæºå›¾ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">//ç›®æ ‡å›¾</div><div class="line">ctx.beginPath();</div><div class="line">ctx.fillStyle=<span class="string">"gray"</span>;</div><div class="line">ctx.fillRect(0,0,mycanvas.width,mycanvas.height);</div><div class="line">ctx.globalCompositeOperation=<span class="string">"destination-out"</span>;</div><div class="line">//ç”»æºå›¾</div><div class="line">mycanvas.onmousedown=<span class="keyword">function</span>(e)&#123;</div><div class="line">	var ev=window.event || e;</div><div class="line">	var x1=ev.clientX-mycanvas.offsetLeft;</div><div class="line">	var y1=ev.clientY-mycanvas.offsetTop;</div><div class="line">	ctx.beginPath();</div><div class="line">	ctx.moveTo(x1,y1);</div><div class="line">	mycanvas.onmousemove=<span class="keyword">function</span>(e)&#123;</div><div class="line">		var ev=window.event || e;</div><div class="line">		var x2=ev.clientX-mycanvas.offsetLeft;</div><div class="line">		var y2=ev.clientY-mycanvas.offsetTop;</div><div class="line">		ctx.lineTo(x2,y2);</div><div class="line">		ctx.lineWidth=23;</div><div class="line">		ctx.lineCap=<span class="string">"round"</span>;</div><div class="line">		ctx.stroke();</div><div class="line">	&#125;</div><div class="line">&#125;	</div><div class="line">document.onmouseup=<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">	mycanvas.onmousemove=null;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/7432522-7caf260979ad62e9.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="b.gif"></p>
<h4 id="è¿›é˜¶ç‰ˆåˆ®åˆ®å¡"><a href="#è¿›é˜¶ç‰ˆåˆ®åˆ®å¡" class="headerlink" title="è¿›é˜¶ç‰ˆåˆ®åˆ®å¡"></a><code>è¿›é˜¶ç‰ˆåˆ®åˆ®å¡</code></h4><ul>
<li>å¯ä»¥é€šè¿‡å¯¹åƒç´ ç‚¹çš„åˆ©ç”¨è®©åˆ®åˆ®å¡åˆ®åˆ°ä¸€åŠçš„æ—¶å€™è‡ªåŠ¨åˆ®å¼€ã€‚</li>
<li>å³åˆ¤æ–­æ‰€æœ‰çš„åƒç´ ç‚¹é€æ˜åº¦ä¸º0çš„ç‚¹ï¼Œ<code>a</code>çš„å€¼=0.<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">//ç›®æ ‡å›¾</div><div class="line">ctx.beginPath();</div><div class="line">ctx.fillStyle=<span class="string">"gray"</span>;</div><div class="line">ctx.fillRect(0,0,mycanvas.width,mycanvas.height);</div><div class="line">ctx.globalCompositeOperation=<span class="string">"destination-out"</span>;</div><div class="line">//ç”»æºå›¾</div><div class="line"></div><div class="line">mycanvas.onmousedown=<span class="keyword">function</span>(e)&#123;</div><div class="line">	var ev=window.event || e;</div><div class="line">	var x1=ev.clientX-mycanvas.offsetLeft;</div><div class="line">	var y1=ev.clientY-mycanvas.offsetTop;</div><div class="line">	ctx.beginPath();</div><div class="line">	ctx.moveTo(x1,y1);</div><div class="line">	mycanvas.onmousemove=<span class="keyword">function</span>(e)&#123;</div><div class="line">		var ev=window.event || e;</div><div class="line">		var x2=ev.clientX-mycanvas.offsetLeft;</div><div class="line">		var y2=ev.clientY-mycanvas.offsetTop;</div><div class="line">		ctx.lineTo(x2,y2);</div><div class="line">		ctx.lineWidth=23;</div><div class="line">		ctx.lineCap=<span class="string">"round"</span>;</div><div class="line">		ctx.stroke();</div><div class="line">		all();</div><div class="line">	&#125;</div><div class="line">&#125;	</div><div class="line">document.onmouseup=<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">	mycanvas.onmousemove=null;</div><div class="line">&#125;</div><div class="line">//åˆ¤æ–­åƒç´ ç‚¹çš„å‡½æ•°</div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">all</span></span>()&#123;</div><div class="line">	var imgData=ctx.getImageData(0,0,mycanvas.width,mycanvas.height);</div><div class="line">	var per=imgData.data.length/8;</div><div class="line">	var count=0;</div><div class="line">	<span class="keyword">for</span>(var i=0;i&lt;imgData.data.length;i+=4)&#123;</div><div class="line">		var a=imgData.data[i+3];</div><div class="line">		<span class="keyword">if</span>(a==0)&#123;</div><div class="line">			count++;</div><div class="line">			<span class="keyword">if</span>(count&gt;=per)&#123;</div><div class="line">				ctx.clearRect(0,0,mycanvas.width,mycanvas.height);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/7432522-f80fc0374ce98bea.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="c.gif"></p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/zhouxiaona" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2017 zhouna<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>